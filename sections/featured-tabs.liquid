{%- style -%}
  #shopify-section-{{ section.id }} {
    padding-top: {{ section.settings.padding_top }}px;
    padding-bottom: {{ section.settings.padding_bottom }}px;
  }
    .featured-tabs { padding: 60px 0; }
    .featured-tabs__header { display: flex; justify-content: center; flex-wrap: wrap; gap: 10px; margin-bottom: 30px; }
    .tab-button { border: 1px solid #ccc; background: #fff; border-radius: 25px; padding: 8px 20px; cursor: pointer; transition: all 0.3s ease; font-weight: 500; font-size: 16px;}
    .tab-button.active, .tab-button:hover { background: #3B2F2F; color: #fff; }
    .tab-content { display: none; }
    .tab-content.active { display: block; }
    .featured-tabs-title {
        text-align: center;
    }
{%- endstyle -%}

<link rel="stylesheet" href="{{ 'component-slider.css' | asset_url }}" media="print" onload="this.media='all'">
<link rel="stylesheet" href="{{ 'component-price.css' | asset_url }}" media="print" onload="this.media='all'">

{%- if settings.quick_view_enabled and section.settings.enable_quick_view -%}
  <link rel="stylesheet" href="{{ 'section-main-product.css' | asset_url }}" media="print" onload="this.media='all'">
  <link rel="stylesheet" href="{{ 'component-deferred-media.css' | asset_url }}" media="print" onload="this.media='all'">
{%- endif -%}
<noscript>{{ 'component-slider.css' | asset_url | stylesheet_tag }}</noscript>
<noscript>{{ 'component-price.css' | asset_url | stylesheet_tag }}</noscript>

{{ 'component-product-grid.css' | asset_url | stylesheet_tag }}
{{ 'component-card.css' | asset_url | stylesheet_tag }}
<section class="featured-tabs " id="shopify-section-{{ section.id }}">
    <h1 class="featured-tabs-title">{{  section.settings.heading }}</h1>
<div class="page-width">
  <div class="featured-tabs__header container">
    {% for block in section.blocks %}
      <button 
        class="tab-button{% if forloop.first %} active{% endif %}" 
        data-tab="{{ block.id }}"
      >
        {{ block.settings.tab_title }}
      </button>
    {% endfor %}
  </div>

  <div class="featured-tabs__content container">
    {% for block in section.blocks %}
      <div class="tab-content{% if forloop.first %} active{% endif %}" id="{{ block.id }}">
        {% assign collection = collections[block.settings.collection] %}

            {%- liquid
      assign products_to_display = block.settings.collection.all_products_count

      if block.settings.collection.all_products_count > block.settings.products_to_show
        assign products_to_display = block.settings.products_to_show
      endif

      assign class_slider = 'slider'
      if section.settings.swipe_on_mobile
        assign class_slider = class_slider | append: ' slider--tablet'
      endif
      assign class_grid_2_col_tablet = 'grid--2-col-tablet'
      assign class_grid_3_col_tablet = 'grid--3-col-tablet'
      assign class_grid_3_col_desktop = 'grid--3-col-desktop'
      assign class_grid_4_col_desktop = 'grid--4-col-desktop'
      assign disable_image_click = false

      if section.settings.horizontal_scroll
        assign class_grid_2_col_tablet = 'grid--2p3-col-tablet'
        assign class_grid_3_col_tablet = 'grid--3p3-col-tablet'
        assign class_grid_3_col_desktop = 'grid--3p3-col-desktop'
        assign class_grid_4_col_desktop = 'grid--4p3-col-desktop'
        assign class_slider = class_slider | append: ' slider--tablet-up'
        if block.settings.products_to_show > 4
          assign disable_image_click = true
          assign class_slider = class_slider | append: ' cursor--drag'
        endif
      endif
    %}
        {% if collection %}
          <div class="slider-mobile-gutter">
            <ul id="Slider-{{ block.id }}" class="product-grid grid grid--rigid{% if section.settings.columns_mobile == '1' %} grid--1-col-mobile{% endif %} grid--2-col{% if block.settings.collection == blank or products_to_display == 4 and section.settings.swipe_on_mobile == false %} {{ class_grid_2_col_tablet }} {{ class_grid_4_col_desktop }}{% else %} {{ class_grid_3_col_tablet }}{% if products_to_display == 6 %} {{ class_grid_3_col_desktop }}{% else %} {{ class_grid_4_col_desktop }}{% endif %}{% endif %}{% if block.settings.collection.all_products_count > 2 and block.settings.products_to_show > 2 %} {{ class_slider }}{% endif %}{% if block.settings.collection == blank %} {{ class_slider }}{% endif %}" role="list" is="scroll-snap-slider" data-draggable="true">
              {% assign products_to_display = block.settings.products_to_show | default: collection.all_products_count %}
              {% for product in collection.products limit: products_to_display %}
                <li id="Slide-{{ block.id }}-{{ forloop.index }}" class="grid__item slider__slide">
                  {% render 'card-product',
                    card_product: product,
                    card_collection: collection,
                    media_size: section.settings.image_ratio,
                    show_secondary_image: true,
                    show_quick_buy: true,
                    show_vendor: true,
                    show_rating: true,
                    enable_quick_view: true,
                    enable_color_swatches: true,
                    enable_countdown: false,
                    enable_image_fill: true,
                    disable_image_click: false
                  %}
                </li>
              {% endfor %}
            </ul>

                {% if section.settings.horizontal_scroll %}
                <div class="slider-buttons no-js-hidden small-hide">
                  <button type="button" class="slider-button slider-button--prev" name="previous" aria-label="{{ 'general.slider.previous_slide' | t }}" disabled="disabled">
                    {% render 'icon', icon: 'arrow' %}
                  </button>
                  <button type="button" class="slider-button slider-button--next" name="next" aria-label="{{ 'general.slider.next_slide' | t }}">
                    {% render 'icon', icon: 'arrow' %}
                  </button>
                </div>
              {% endif %}
          </div>
        {% else %}
          <p>No collection selected.</p>
        {% endif %}
      </div>
    {% endfor %}
  </div>
</div>
    <script>
    document.addEventListener('DOMContentLoaded', function() {
      const buttons = document.querySelectorAll('.tab-button');
      const contents = document.querySelectorAll('.tab-content');

      buttons.forEach(btn => {
        btn.addEventListener('click', () => {
          buttons.forEach(b => b.classList.remove('active'));
          contents.forEach(c => c.classList.remove('active'));

          btn.classList.add('active');
          document.getElementById(btn.dataset.tab).classList.add('active');
        });
      });
    });
  </script>
</section>
{% schema %}
{
  "name": "Featured Tabs",
  "tag": "section",
  "settings": [
    {
      "type": "checkbox",
      "id": "horizontal_scroll",
      "default": false,
      "label": "t:sections.all.horizontal_scroll_on_desktop.label"
    },
    {
      "type": "checkbox",
      "id": "show_view_all",
      "default": true,
      "label": "t:sections.featured-collection.settings.show_view_all.label"
    },
    {
      "type": "checkbox",
      "id": "show_divider",
      "default": false,
      "label": "t:sections.all.show_divider.label"
    },
    {
      "type": "header",
      "content": "t:sections.all.heading.label"
    },
    {
      "type": "richtext",
      "id": "heading",
      "default": "<p>Featured collection</p>",
      "label": "t:sections.all.heading.label"
    },
    {
      "type": "select",
      "id": "heading_size",
      "options": [
        {
          "value": "h2",
          "label": "t:sections.all.heading_size.options__1.label"
        },
        {
          "value": "h1",
          "label": "t:sections.all.heading_size.options__2.label"
        },
        {
          "value": "h0",
          "label": "t:sections.all.heading_size.options__3.label"
        }
      ],
      "default": "h1",
      "label": "t:sections.all.heading_size.label"
    },
    {
      "type": "select",
      "id": "heading_alignment",
      "label": "t:sections.all.heading_alignment.label",
      "options": [
        {
          "value": "left",
          "label": "t:sections.all.heading_alignment.options__1.label"
        },
        {
          "value": "center",
          "label": "t:sections.all.heading_alignment.options__2.label"
        },
        {
          "value": "right",
          "label": "t:sections.all.heading_alignment.options__3.label"
        }
      ],
      "default": "left"
    },
    {
      "type": "select",
      "id": "heading_tag",
      "options": [
        {
          "value": "h1",
          "label": "t:sections.all.heading_tag.options__1.label"
        },
        {
          "value": "h2",
          "label": "t:sections.all.heading_tag.options__2.label"
        },
        {
          "value": "h3",
          "label": "t:sections.all.heading_tag.options__3.label"
        },
        {
          "value": "h4",
          "label": "t:sections.all.heading_tag.options__4.label"
        },
        {
          "value": "h5",
          "label": "t:sections.all.heading_tag.options__5.label"
        },
        {
          "value": "h6",
          "label": "t:sections.all.heading_tag.options__6.label"
        },
        {
          "value": "div",
          "label": "t:sections.all.heading_tag.options__7.label"
        },
        {
          "value": "span",
          "label": "t:sections.all.heading_tag.options__8.label"
        },
        {
          "value": "p",
          "label": "t:sections.all.heading_tag.options__9.label"
        }
      ],
      "default": "h2",
      "label": "t:sections.all.heading_tag.label",
      "info": "t:sections.all.heading_tag.info"
    },
    {
      "type": "header",
      "content": "t:sections.all.mobile_layout.header.content"
    },
    {
      "type": "select",
      "id": "columns_mobile",
      "options": [
        {
          "value": "1",
          "label": "t:sections.all.mobile_layout.columns_mobile.options__1.label"
        },
        {
          "value": "2",
          "label": "t:sections.all.mobile_layout.columns_mobile.options__2.label"
        }
      ],
      "default": "2",
      "label": "t:sections.all.mobile_layout.columns_mobile.label"
    },
    {
      "type": "checkbox",
      "id": "swipe_on_mobile",
      "default": false,
      "label": "t:sections.all.mobile_layout.swipe_on_mobile.label"
    },
    {
      "type": "header",
      "content": "t:sections.all.product_card.header.content"
    },
    {
      "type": "select",
      "id": "image_ratio",
      "options": [
        {
          "value": "adapt",
          "label": "t:sections.all.card_image_ratio.options__1.label"
        },
        {
          "value": "square",
          "label": "t:sections.all.card_image_ratio.options__2.label"
        },
        {
          "value": "portrait",
          "label": "t:sections.all.card_image_ratio.options__3.label"
        },
        {
          "value": "landscape",
          "label": "t:sections.all.card_image_ratio.options__4.label"
        },
        {
          "value": "wide",
          "label": "t:sections.all.card_image_ratio.options__5.label"
        }
      ],
      "default": "adapt",
      "label": "t:sections.all.card_image_ratio.label"
    },
    {
      "type": "select",
      "id": "image_position",
      "options": [
        {
          "value": "20% 0",
          "label": "t:sections.all.image_position.options__1.label"
        },
        {
          "value": "top center",
          "label": "t:sections.all.image_position.options__2.label"
        },
        {
          "value": "80% 0",
          "label": "t:sections.all.image_position.options__3.label"
        },
        {
          "value": "20% 50%",
          "label": "t:sections.all.image_position.options__4.label"
        },
        {
          "value": "center center",
          "label": "t:sections.all.image_position.options__5.label"
        },
        {
          "value": "80% 50%",
          "label": "t:sections.all.image_position.options__6.label"
        },
        {
          "value": "20% 100%",
          "label": "t:sections.all.image_position.options__7.label"
        },
        {
          "value": "bottom center",
          "label": "t:sections.all.image_position.options__8.label"
        },
        {
          "value": "80% 100%",
          "label": "t:sections.all.image_position.options__9.label"
        }
      ],
      "default": "center center",
      "label": "t:sections.all.image_position.label",
      "info": "t:sections.all.image_position.info"
    },
    {
      "type": "checkbox",
      "id": "enable_image_fill",
      "default": true,
      "label": "t:sections.all.product_card.enable_image_fill.label",
      "info": "t:sections.all.product_card.enable_image_fill.info"
    },
    {
      "type": "checkbox",
      "id": "show_secondary_image",
      "default": false,
      "label": "t:sections.all.product_card.show_secondary_image.label"
    },
    {
      "type": "range",
      "id": "secondary_image_max",
      "min": 1,
      "max": 5,
      "step": 1,
      "label": "Maxium images on hover",
      "default": 1
    },
    {
      "type": "checkbox",
      "id": "show_vendor",
      "default": false,
      "label": "t:sections.all.product_card.show_vendor.label"
    },
    {
      "type": "checkbox",
      "id": "show_rating",
      "default": false,
      "label": "t:sections.all.product_card.show_rating.label",
      "info": "t:sections.all.product_card.show_rating.info"
    },
    {
      "type": "checkbox",
      "id": "show_quick_buy",
      "default": true,
      "label": "t:sections.all.product_card.show_quick_buy.label"
    },
    {
      "type": "checkbox",
      "id": "enable_quick_view",
      "default": true,
      "label": "t:sections.all.product_card.enable_quick_view.label"
    },
    {
      "type": "checkbox",
      "id": "enable_color_swatches",
      "default": true,
      "label": "t:sections.all.product_card.enable_color_swatches.label"
    },
    {
      "type": "checkbox",
      "id": "enable_countdown",
      "default": true,
      "label": "t:sections.all.product_card.enable_countdown.label"
    },
    {
      "type": "header",
      "content": "t:sections.all.padding.header.content"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "t:sections.all.padding.padding_top.unit",
      "label": "t:sections.all.padding.padding_top.label",
      "default": 36
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "t:sections.all.padding.padding_bottom.unit",
      "label": "t:sections.all.padding.padding_bottom.label",
      "default": 36
    }
  ],
  "blocks": [
    {
      "type": "tab",
      "name": "Collection Tab",
      "settings": [
        {
          "type": "text",
          "id": "tab_title",
          "label": "Tab Title",
          "default": "Tab"
        },
        {
          "type": "collection",
          "id": "collection",
          "label": "Select Collection"
        },
        {
          "type": "range",
          "id": "products_to_show",
          "label": "Number of Products to Show",
          "default": 4,
          "min": 1,
          "max": 20
        },
           {
      "type": "header",
      "content": "t:sections.all.product_card.header.content"
    },
    {
      "type": "select",
      "id": "image_ratio",
      "options": [
        {
          "value": "adapt",
          "label": "t:sections.all.card_image_ratio.options__1.label"
        },
        {
          "value": "square",
          "label": "t:sections.all.card_image_ratio.options__2.label"
        },
        {
          "value": "portrait",
          "label": "t:sections.all.card_image_ratio.options__3.label"
        },
        {
          "value": "landscape",
          "label": "t:sections.all.card_image_ratio.options__4.label"
        },
        {
          "value": "wide",
          "label": "t:sections.all.card_image_ratio.options__5.label"
        }
      ],
      "default": "adapt",
      "label": "t:sections.all.card_image_ratio.label"
    },
    {
      "type": "select",
      "id": "image_position",
      "options": [
        {
          "value": "20% 0",
          "label": "t:sections.all.image_position.options__1.label"
        },
        {
          "value": "top center",
          "label": "t:sections.all.image_position.options__2.label"
        },
        {
          "value": "80% 0",
          "label": "t:sections.all.image_position.options__3.label"
        },
        {
          "value": "20% 50%",
          "label": "t:sections.all.image_position.options__4.label"
        },
        {
          "value": "center center",
          "label": "t:sections.all.image_position.options__5.label"
        },
        {
          "value": "80% 50%",
          "label": "t:sections.all.image_position.options__6.label"
        },
        {
          "value": "20% 100%",
          "label": "t:sections.all.image_position.options__7.label"
        },
        {
          "value": "bottom center",
          "label": "t:sections.all.image_position.options__8.label"
        },
        {
          "value": "80% 100%",
          "label": "t:sections.all.image_position.options__9.label"
        }
      ],
      "default": "center center",
      "label": "t:sections.all.image_position.label",
      "info": "t:sections.all.image_position.info"
    },
    {
      "type": "checkbox",
      "id": "enable_image_fill",
      "default": true,
      "label": "t:sections.all.product_card.enable_image_fill.label",
      "info": "t:sections.all.product_card.enable_image_fill.info"
    },
        {
          "type": "checkbox",
          "id": "show_secondary_image",
          "label": "Show Secondary Image on Hover",
          "default": true
        },
        {
          "type": "checkbox",
          "id": "show_quick_buy",
          "label": "Show Quick Buy Button",
          "default": true
        },
        {
          "type": "checkbox",
          "id": "show_vendor",
          "label": "Show Vendor",
          "default": true
        },
        {
          "type": "checkbox",
          "id": "show_rating",
          "label": "Show Product Rating",
          "default": true
        },
        {
          "type": "checkbox",
          "id": "enable_quick_view",
          "label": "Enable Quick View",
          "default": true
        }
      ]
    }
  ],
  "max_blocks": 6,
  "presets": [
    {
      "name": "Featured Tabs",
      "category": "Collections"
    }
  ]
}
{% endschema %}
